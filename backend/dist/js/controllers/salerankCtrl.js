angular.module("app").controller("SalerankCtrl",["$scope","CommonFunction","DataLoad","toaster","$rootScope",function(a,t,e,o,n){a.dataList=[],a.total=[],a.loading=!0,a.haveData=!0,a.selectedYear="",a.selectedMonth="",a.yearData=[];var l=2016,r=(new Date).getFullYear();if(l==r){var c={};c.id=l,c.name=l,a.yearData.push(c)}else for(var d=l;r>=d;d++){var c={};c.id=d,c.name=d,a.yearData.push(c)}for(a.selectedYear=r,a.monthSelectData=[],d=0;12>=d;d++)0==d?a.monthSelectData.push({id:99,name:"全部月"}):a.monthSelectData.push({id:d,name:d+"月"});a.selectedMonth=a.monthSelectData[0].id,a.changeMonth=function(){a.getAllData()},a.changeYear=function(){a.selectedMonth=a.monthSelectData[0].id,a.getAllData()},a.getAllData=function(){a.loading=!0;var t=e.getSaleRankData({year:a.selectedYear,month:a.selectedMonth});return t.then(function(t){t&&0==t.code?(a.haveData=!0,a.dataList=t.data,a.total=t.total):(a.dataList=[],a.total=[],a.haveData=!1,o.pop("error","销售统计",t.message)),a.loading=!1},function(){a.dataList=[],a.total=[],a.haveData=!1,a.loading=!1,o.pop("error","销售统计","获取数据出错！")})},a.getAllData()}]);