angular.module("app").controller("ServicesettingCtrl",["$scope","CommonFunction","DataLoad","toaster","divpage","$modal",function(a,e,t,g,o,n){a.haveData=!0,a.loading=!0,a.query="",a.page=1,a.totalPage=1,a.perPage=10,a.dataList=[],a.getAllData=function(){a.loading=!0;var e=t.getMyDownloadPageData({searchkey:a.query,offset:(a.page-1)*a.perPage,num:a.perPage});return e.then(function(e){if(e&&0==e.code)if(0!=e.data.data.length){a.haveData=!0,a.dataList=e.data.data,a.totalPage=Math.ceil(e.data.count/a.perPage);var t=$("#divpage-page");o.getready(t,a.totalPage,a.page)}else a.dataList=[],g.pop("success","我的下载","没有数据！"),a.haveData=!1;else a.dataList=[],a.haveData=!1,g.pop("error","我的下载",e.message);a.loading=!1},function(){a.dataList=[],a.haveData=!1,a.loading=!1,g.pop("error","我的下载","获取数据出错！")})},a.getAllData(),a.isFirst=function(a){return 1==a},a.isDisable=function(e){return 1==e&&1==a.totalPage?!0:!(e<a.totalPage)},a.getInfoPage=function(e){e<=a.totalPage&&e>0&&(a.page=e,a.getAllData())},a.divpageByPage=function(e){var t=$(e.currentTarget).html(),g=Number(t);angular.isNumber(g)&&g>0&&a.getInfoPage(g)},a.searchData=function(){a.page=1,a.getAllData()}}]);