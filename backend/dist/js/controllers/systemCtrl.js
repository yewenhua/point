angular.module("app").controller("SystemCtrl",["$scope","$rootScope","CommonFunction","DataLoad","toaster",function(e,s,t,r,m){for(e.system={},e.system.title="",e.system.privilege_key="",e.system.site_name="",e.system.site_www="",e.system.keywords="",e.system.description="",e.month_check_list=[],i=1;i<=28;i++)e.month_check_list.push({id:i,value:i+"日"});e.system.isNew=!0,e.editSystem=function(){if(""==e.system.title)return m.pop("error","系统设置","系统名称不能为空！"),!1;if(""==e.system.author)return m.pop("error","系统设置","版权归属不能为空！"),!1;if(""==e.system.privilege_key)return m.pop("error","系统设置","授权绑定不能为空！"),!1;if(""==e.system.site_name)return m.pop("error","系统设置","站点名称不能为空！"),!1;if(""==e.system.site_www)return m.pop("error","系统设置","站点域名不能为空！"),!1;var t=r.editSystem({id:e.system.isNew?"":e.system.id,title:e.system.title,author:e.system.author,privilege_key:e.system.privilege_key,site_name:e.system.site_name,site_www:e.system.site_www,keywords:e.system.keywords,description:e.system.description});return t.then(function(t){t&&0==t.code?(1==e.system.isNew&&(e.system.id=t.data,e.system.isNew=!1),s.systemInfo.title=angular.copy(e.system.title),s.systemInfo.signin_title=s.systemInfo.title,m.pop("success","系统设置","保存成功！")):m.pop("error","系统设置",t.message)},function(){m.pop("error","系统设置","保存系统设置出错！")})},e.getSystemData=function(){var t=r.getSystemData({});return t.then(function(t){t&&0==t.code?(e.system=t.data,e.system.isNew=!1,s.systemInfo=angular.copy(t.data)):(e.system.isNew=!0,e.system.title="",e.system.privilege_key="",e.system.site_name="",e.system.site_www="",e.system.keywords="",e.system.description="",m.pop("error","系统设置",t.message))},function(){e.system.isNew=!0,e.system.title="",e.system.privilege_key="",e.system.site_name="",e.system.site_www="",e.system.keywords="",e.system.description="",m.pop("error","系统设置","获取系统设置出错！")})},e.getSystemData()}]);