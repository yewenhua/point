angular.module("app").controller("LogCtrl",["$scope","CommonFunction","DataLoad","toaster","divpage",function(a,t,e,n,r){a.haveData=!0,a.loading=!0,a.init=!0,a.dateSelectSingle={start:moment(new Date).utc().startOf("day"),end:""},a.query="",a.page=1,a.totalPage=1,a.perPage=10,a.catchList=[],a.originalData="",a.colors=["primary","info","success","warning","danger","dark"],a.isFirst=function(a){return 1==a},a.isDisable=function(t){return 1==t&&1==a.totalPage?!0:!(t<a.totalPage)},a.getInfoPage=function(t){t<=a.totalPage&&t>0&&(a.page=t,a.getAllData())},a.divpageByPage=function(t){var e=$(t.currentTarget).html(),n=Number(e);angular.isNumber(n)&&n>0&&a.getInfoPage(n)},a.searchData=function(){a.page=1,a.getAllData()},a.getAllData=function(){var t=e.logPageData({time:a.init?"":a.dateSelectSingle.end.format("YYYY-MM-DD"),searchkey:a.query,offset:(a.page-1)*a.perPage,num:a.perPage});return t.then(function(t){if(t&&0==t.code)if(0!=t.data.data.length){a.haveData=!0,a.catchList=t.data.data,a.originalData=t,a.totalPage=Math.ceil(t.data.count/a.perPage);var e=$("#divpage-page");r.getready(e,a.totalPage,a.page)}else a.catchList=[],a.originalData="",n.pop("error"," 申请提现","没有数据！"),a.haveData=!1;else a.catchList=[],a.originalData="",a.haveData=!1,n.pop("error"," 申请提现",t.message);a.loading=!1},function(){a.catchList=[],a.originalData="",a.haveData=!1,a.loading=!1,n.pop("error"," 申请提现"," 获取提现记录出错！")})},a.getAllData(),a.$watch("dateSelectSingle.start",function(t,e){t!=e&&(a.init=!1,a.page=1,a.getAllData())},!0)}]);