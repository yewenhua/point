angular.module("app").controller("RepeatcompensationCtrl",["$scope","$rootScope","CommonFunction","DataLoad","toaster",function(t,a,e,o,n){t.data={},t.data.mobile="",t.data.limit_point="",t.data.rate="",t.data.day="",t.auto_to_consume=!1,t.dateSelectBeginTime={start:moment(new Date).utc().startOf("day"),end:moment(new Date).utc().startOf("day")},t.dateSelectEndTime={start:moment(new Date).utc().startOf("day"),end:moment(new Date).utc().startOf("day")},t.insertCompensation=function(){if(""==t.data.mobile)return n.pop("error","复投补偿","手机号码不能为空！"),!1;if(""==t.data.limit_point)return n.pop("error","复投补偿","限额不能为空！"),!1;if(""==t.data.rate)return n.pop("error","复投补偿","倍率不能为空！"),!1;if(""==t.data.day)return n.pop("error","复投补偿","周期不能为空！"),!1;var a=o.insertCompensation({mobile:t.data.mobile,limit_point:t.data.limit_point,rate:t.data.rate,day:t.data.day,begin_time:t.dateSelectBeginTime.start.format("YYYY-MM-DD"),end_time:t.dateSelectEndTime.start.format("YYYY-MM-DD"),auto_to_consume:t.auto_to_consume?1:0});return a.then(function(a){a&&0==a.code?(t.data.mobile="",t.data.limit_point="",t.data.rate="",t.data.day="",t.auto_to_consume=!1,n.pop("success","复投补偿","保存成功！")):n.pop("error","复投补偿",a.message)},function(){n.pop("error","复投补偿","保存复投补偿出错！")})}}]);