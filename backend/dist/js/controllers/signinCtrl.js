"use strict";angular.module("app").controller("SigninFormController",["$scope","DataLoad","$location","toaster",function(o,r,e,n){o.user={name:"",password:""};var t=!1;o.loginHtml="登  录",o.login=function(){if(0==t&&""!=o.user.name&&""!=o.user.password){t=!0,o.loginHtml="登录中……";var a=r.signin({name:o.user.name,password:o.user.password});return a.then(function(r){r&&0==r.code&&null!=r.data?(o.loginHtml="登录成功",r.data.privilege_list=JSON.parse(r.data.privilege_list),sessionStorage.setItem("userInfo",JSON.stringify(r.data)),e.path("/")):r&&10009==r.code?(o.loginHtml="登录",n.pop("error","登录",r.message)):(o.loginHtml="登录",n.pop("error","登录","用户名或密码错误！")),t=!1},function(){t=!1,o.loginHtml="登  录",n.pop("error","登录","未知错误，请刷新重试！")})}}}]);