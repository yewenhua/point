angular.module("app").controller("WechatsettingCtrl",["$scope","CommonFunction","DataLoad","toaster","divpage","$modal",function(a,t,e,g,o,n){a.haveData=!0,a.loading=!0,a.query="",a.page=1,a.totalPage=1,a.perPage=10,a.dataList=[],a.getAllData=function(){a.loading=!0;var t=e.getMyDownloadPageData({searchkey:a.query,offset:(a.page-1)*a.perPage,num:a.perPage});return t.then(function(t){if(t&&0==t.code)if(0!=t.data.data.length){a.haveData=!0,a.dataList=t.data.data,a.totalPage=Math.ceil(t.data.count/a.perPage);var e=$("#divpage-page");o.getready(e,a.totalPage,a.page)}else a.dataList=[],g.pop("success","我的下载","没有数据！"),a.haveData=!1;else a.dataList=[],a.haveData=!1,g.pop("error","我的下载",t.message);a.loading=!1},function(){a.dataList=[],a.haveData=!1,a.loading=!1,g.pop("error","我的下载","获取数据出错！")})},a.getAllData(),a.isFirst=function(a){return 1==a},a.isDisable=function(t){return 1==t&&1==a.totalPage?!0:!(t<a.totalPage)},a.getInfoPage=function(t){t<=a.totalPage&&t>0&&(a.page=t,a.getAllData())},a.divpageByPage=function(t){var e=$(t.currentTarget).html(),g=Number(e);angular.isNumber(g)&&g>0&&a.getInfoPage(g)},a.searchData=function(){a.page=1,a.getAllData()}}]);