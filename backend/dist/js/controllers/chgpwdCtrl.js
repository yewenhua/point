"use strict";app.controller("ChgpwdCtrl",["$rootScope","$scope","$http","$state","toaster","$timeout","DataLoad","$location",function(r,s,o,e,p,w,a,n){s.authError=null,s.user={password:"",newpassword:"",renewpassword:""};var t=!1;s.chgpwd=function(){if(s.user.newpassword!=s.user.renewpassword)return p.pop("error","系统设置"," 两次输入密码不一致！"),!1;if(0==t&&""!=s.user.password&&""!=s.user.newpassword&&""!=s.user.renewpassword){t=!0;var o=a.chgpwd({id:r.userInfo.id,password:s.user.password,newpassword:s.user.newpassword});return o.then(function(r){r&&0==r.code?(p.pop("success","修改密码","修改成功！"),s.user={password:"",newpassword:"",renewpassword:""}):p.pop("error","修改密码","修改密码出错！"),t=!1},function(){t=!1,p.pop("error","修改密码","未知错误，请刷新重试！")})}}}]);