<style>
  .form-group{
    margin-bottom:8px;
  }
</style><div class="hbox hbox-auto-xs hbox-auto-sm" ng-controller=GoodlistCtrl><div class="col w-lg bg-light b-r bg-auto"><div class="bg-light lter b-b wrapper-md ng-scope"><h1 class="m-n font-thin h3">商品列表</h1></div><div class=wrapper-md><div class="b-a bg-light dk r r-2x relative"><span ng-if=doing_async>加载中...</span><abn-tree ng-if=!doing_async tree-data=my_data tree-control=my_tree on-select=my_tree_handler(branch) expand-level=2 initial-selection=全部 icon-leaf="fa fa-angle-double-right" icon-expand="fa fa-plus" icon-collapse="fa fa-minus"></abn-tree></div></div></div><div class=col><div class="bg-light lter b-b wrapper-md ng-scope relative"><h1 class="m-n font-thin h3 visibility-hidden">商品列表</h1><div class=override></div></div><div class=wrapper-md ng-show=!editing><div class="input-group weekcheck-search-area relative"><span class="input-group-addon input-sm" ng-click=searchData()><i class="fa fa-search"></i></span> <input type=text class="form-control input-sm ng-pristine ng-valid ng-touched input-search-width find-search-input" style=width:120px; placeholder=商品、商家、手机 ng-model=query ng-enter=searchData()><input daterange=daterange type=text class="m-l widthdirective dateranges timeinputrange" style=margin-left:10px; ng-model=dateSelectRange min-date=2016-01-01 placeholder=按时间段搜索 id=dateranges> <a ng-if="branch.path != 1" style="position:relative; top:5px;" class="pull-right btn btn-sm btn-info m-t-n-xs" ng-click=add()><i class="fa fa-fw m-r-xs fa-plus"></i>新增</a><div class=btn-group style="margin-left:10px; margin-top:-1px;"><label class="btn btn-sm btn-dark ng-untouched ng-valid ng-dirty type-label-small-consume" ng-model=radioModel btn-radio=99><i class="fa fa-check text-active"></i>全部</label> <label class="btn btn-sm btn-primary ng-untouched ng-valid ng-dirty type-label-small-consume" ng-model=radioModel btn-radio=1><i class="fa fa-check text-active"></i>上架</label> <label class="btn btn-sm btn-info ng-untouched ng-valid ng-dirty type-label-small-consume" ng-model=radioModel btn-radio=2><i class="fa fa-check text-active"></i>下架</label> <label class="btn btn-sm btn-success ng-untouched ng-valid ng-dirty active ng-valid-parse type-label-small-consume" ng-model=radioModel btn-radio=3><i class="fa fa-check text-active"></i>推荐</label> <label class="btn btn-sm btn-twelve ng-untouched ng-valid ng-dirty active ng-valid-parse type-label-small-consume" ng-model=radioModel btn-radio=4><i class="fa fa-check text-active"></i>限时</label> <label class="btn btn-sm btn-eleven ng-untouched ng-valid ng-dirty active ng-valid-parse type-label-small-consume" ng-model=radioModel btn-radio=5><i class="fa fa-check text-active"></i>分享</label></div><div class=btn-group style="margin-left:10px; margin-top:-1px;"><label class="btn btn-sm btn-six ng-untouched ng-valid ng-dirty type-label-small-consume" ng-model=merchantModel btn-radio=99><i class="fa fa-check text-active"></i>全部</label> <label class="btn btn-sm btn-warning ng-untouched ng-valid ng-dirty type-label-small-consume" ng-model=merchantModel btn-radio=1><i class="fa fa-check text-active"></i>商家</label> <label class="btn btn-sm btn-danger ng-untouched ng-valid ng-dirty user-type-label" style=width:60px; ng-model=merchantModel btn-radio=2><i class="fa fa-check text-active"></i>非商家</label></div></div><br><div class="panel panel-default relative"><div class=yp-mask-content ng-show=loading><div class=yp-mask></div><div class=yp-mask-loading><div class="spinner spinner-sm"><div class=rect1></div><div class=rect2></div><div class=rect3></div><div class=rect4></div><div class=rect5></div></div></div></div><div class=panel-heading><span>商品列表</span></div><div><table class="table m-b-none align-center"><thead><tr><th class="select-all select-all-goods" ng-show="isOperate('app.goodslist')"><label class=i-checks><input type=checkbox ng-model=selectAll> <i></i></label></th><th>序号</th><th><span class=article-two-hundred-max-width>商品名称</span></th><th>库存</th><th>商品价格</th><th>兑换模式</th><th>上架</th><th>推荐</th><th><span class=article-hundred-max-width>归属商家（手机）</span></th><th>上传时间</th><th>操作</th></tr></thead><tbody class=article_table><tr ng-repeat="item in dataList"><td class="select-item select-item-goods" ng-show="isOperate('app.goodslist')"><label class=i-checks><input type=checkbox ng-model=item.selected> <i></i></label></td><td ng-cloak>{{(page - 1) * perPage + $index + 1}}</td><td ng-cloak title="{{item.name ? item.name : '--'}}"><span class=article-two-hundred-max-width>{{item.name ? item.name : '--'}}</span></td><td ng-cloak>{{item.total ? item.total : '--'}}</td><td ng-cloak>{{price(item)}}</td><td ng-cloak>{{item.model == 1 ? '购物券' : item.model == 2 ? '消费积分' : '消费积分 + 现金'}}</td><td ng-cloak><label class="i-switch bg-info m-t-xs m-r align-left relative" style=top:5px;><input type=checkbox ng-model=item.open ng-change=switch_status(item)> <i></i></label></td><td ng-cloak><label class="i-switch bg-info m-t-xs m-r align-left relative" style=top:5px;><input type=checkbox ng-model=item.recommend ng-change=recommend_status(item)> <i></i></label></td><td ng-cloak title="{{item.com_name && item.com_mobile ? item.com_name + '(' + item.com_mobile + ')' : item.com_name ? item.com_name : item.com_mobile ? item.com_mobile : '无'}}"><span class=article-hundred-max-width>{{item.com_name && item.com_mobile ? item.com_name + '(' + item.com_mobile + ')' : item.com_name ? item.com_name : item.com_mobile ? item.com_mobile : '无'}}</span></td><td ng-cloak>{{item.created_at ? item.created_at.substring(0, 10) : '--'}}</td><td><button class="btn btn-primary btn-smest" ng-click=updateGoods(item)><i class="fa fa-fw m-r-xs fa-pencil"></i>修改</button></td></tr><tr ng-if=!haveData><td colspan=11 class=text-center>没有数据！</td></tr></tbody><tfoot class=hide-if-no-paging ng-show=haveData><tr><td colspan=4 class=relative><div class=yearlan-status ng-show=!loading><button ng-if="dataList.length > 0" class="btn btn-sm btn-danger" ng-disabled=all_delete_disabled ng-click=deleteBatch()><i class="fa fa-fw m-r-xs fa-trash-o"></i>{{all_delete_html}}</button> <button ng-if="dataList.length > 1" class="btn btn-sm btn-primary" ng-disabled="moveable == false" ng-click=up()><i class="fa fa-fw m-r-xs fa-arrow-up"></i>上移</button> <button ng-if="dataList.length > 1" class="btn btn-sm btn-primary" ng-disabled="moveable == false" ng-click=down()><i class="fa fa-fw m-r-xs fa-arrow-down"></i>下移</button> <button ng-if="dataList.length > 1" class="btn btn-sm btn-info" ng-disabled="moveable == false" ng-click=top()><i class="fa fa-fw m-r-xs fa-arrow-up"></i>置顶</button></div></td><td colspan=7 class=text-center><div class=page-content ng-hide=loading><ul class="divpage-ul ul-border-left" id=divpage-page><li class=divpage ng-click=getInfoPage(1) ng-class="{true:'disable'}[isFirst(page)]">首页</li><li class=divpage ng-click=getInfoPage(page-1) ng-class="{true:'disable'}[isFirst(page)]">上一页</li><li class=divpage ng-click=divpageByPage($event)></li><li class=divpage ng-click=divpageByPage($event)></li><li class=divpage ng-click=divpageByPage($event)></li><li class=divpage ng-click=divpageByPage($event)></li><li class=divpage ng-click=divpageByPage($event)></li><li class=divpage ng-click="getInfoPage(page + 1)" ng-class="{'disable':isDisable(page)}">下一页</li><li class=divpage ng-click=getInfoPage(totalPage) ng-class="{'disable':isDisable(page)}">尾页</li></ul></div></td></tr></tfoot></table></div></div></div><div class=wrapper-md ng-show=editing><form role=form class="ng-pristine ng-valid"><div class=form-group><label>商品图片</label><div class="multiple-file-select relative"><span class="glyphicon glyphicon-folder-open"></span><p class=file-type-name>选择文件（可选多个）</p><input class=file-select-no-visibile type=file nv-file-select uploader=uploader multiple></div><div class="bg-light b-b"><span class="pull-right m-t-xs">列表长度: <b class="badge bg-info">{{ uploader.queue.length }}</b></span><h3 class="m-n font-thin">文件列表</h3></div><div><table class="table bg-white-only b-a"><thead><tr><th width=40%>名称</th><th ng-show=uploader.isHTML5>大小</th><th ng-show=uploader.isHTML5>进度</th><th>状态</th><th>动作</th></tr></thead><tbody><tr ng-repeat="item in uploader.queue"><td><strong>{{ item.file.name }}</strong></td><td ng-show=uploader.isHTML5 nowrap>{{ item.file.size/1024/1024|number:2 }} MB</td><td ng-show=uploader.isHTML5><div class="progress progress-sm m-b-none m-t-xs"><div class="progress-bar bg-info" role=progressbar ng-style="{ 'width': item.progress + '%' }"></div></div></td><td class=text-center><span ng-show=item.isSuccess class=text-success><i class="glyphicon glyphicon-ok"></i></span> <span ng-show=item.isCancel class=text-warning><i class="glyphicon glyphicon-ban-circle"></i></span> <span ng-show=item.isError class=text-danger><i class="glyphicon glyphicon-remove"></i></span></td><td nowrap><button type=button class="btn btn-default btn-xs" ng-click=item.upload() ng-disabled="item.isReady || item.isUploading || item.isSuccess">上传</button> <button type=button class="btn btn-default btn-xs" ng-click=item.cancel() ng-disabled=!item.isUploading>取消</button> <button type=button class="btn btn-default btn-xs" ng-click=item.remove()>删除</button></td></tr></tbody></table><div><div><p>队列进度:</p><div class="progress bg-light dker"><div class="progress-bar progress-bar-striped bg-info" role=progressbar ng-style="{ 'width': uploader.progress + '%' }"></div></div></div><button type=button class="btn btn-addon btn-success" ng-click=uploader.uploadAll() ng-disabled=!uploader.getNotUploadedItems().length><i class="fa fa-arrow-circle-o-up"></i> 上传所有</button> <button type=button class="btn btn-addon btn-warning" ng-click=uploader.cancelAll() ng-disabled=!uploader.isUploading><i class="fa fa-ban"></i> 取消所有</button> <button type=button class="btn btn-addon btn-danger" ng-click=uploader.clearQueue() ng-disabled=!uploader.queue.length><i class="fa fa-trash-o"></i> 删除所有</button></div><ul class=imgWrap><li ng-repeat="imgItem in imgData" ng-click="setFace($event, imgItem)"><a class=imgBox><span ng-click="deleteImg($event, imgItem)"><i class=icon-close></i></span> <img ng-src={{imgItem.file.url}}><div class=is_face ng-class="{true: 'active', false: ''}[imgItem.selected]"><i class=icon-check></i>设为封面</div></a></li></ul><div class=clear></div></div><br><br></div><div class=goods-desc-content><div class="form-group relative"><label>启用商品规格</label> <label class="i-switch bg-info m-t-xs m-r align-left relative" style=top:5px;><input type=checkbox ng-model=goodsData.is_option> <i></i></label><div ng-if=isDisplayNew() class="btn m-b-xs btn-sm btn-primary btn-addon click-select insert-guige" ng-click=insertOption()><i class="fa fa-plus"></i>新增规格项</div></div><div ng-if=goodsData.is_option><div class="form-group guige-outter" ng-repeat="item in goodsData.options" ng-init="outerIndex = $index"><div class="input-group m-b"><input type=text class="form-control input-middle" ng-model=item.title placeholder=选项标题> <span class=input-group-btn><button class="btn btn-middle btn-info" type=button ng-click="insertItemOption(outerIndex, item)">添加子选项</button> <button class="btn btn-middle btn-danger btn-delete-item" type=button title=删除 ng-click=deleteOption($index)><i class="fa fa-times pull-right"></i></button></span></div><div class="input-group m-b guige-child-item" ng-repeat="childItem in item.child"><input type=text class="guige-item-input form-control input-middle" ng-model=childItem.title placeholder=子选项> <span class="guige-item-operate input-group-btn"><button class="btn btn-middle btn-danger btn-delete-item" type=button title=删除 ng-click="deleteItemOption(item.child, $index)"><i class="fa fa-times pull-right"></i></button></span></div></div><div class="panel panel-default" ng-if="goodsData.optionList.length > 0"><table class="table table-striped b-t b-light"><tr><th ng-repeat="item in goodsData.options">{{item.title}}</th><th>商品库存</th></tr><tr ng-repeat="item in goodsData.optionList"><td>{{rowTitle($index)}}</td><td ng-if=item.subTitle>{{item.subTitle}}</td><td><input class="guige-input form-control" ng-model=item.num type=text></td></tr></table></div></div><div class=goods-desc-left><label>商品描述</label><div class=ueditor ng-model=goodsData.desc style="width:375px; min-height:730px;"></div><br></div><div class=goods-desc-right><div class=form-group><label>商品名称</label> <input type=text class=form-control placeholder=请输入商品名称 ng-model=goodsData.name required></div><div class=form-group ng-if=!goodsData.is_option><label>商品库存</label> <input type=text class=form-control placeholder=请输入商品库存 ng-model=goodsData.total required></div><div class=form-group><label>兑换模式</label><div class=form-group><div class="radio inline-block goods-img-item" style="margin-top:0px; margin-bottom:0px;"><label class=i-checks><input type=radio name=leader value=1 ng-model=goodsData.model ng-checked=true required> <i></i>购物券</label></div><div class="radio inline-block goods-img-item" style="margin-top:0px; margin-bottom:0px;"><label class=i-checks><input type=radio name=leader value=2 ng-model=goodsData.model required> <i></i>消费积分</label></div><div class="radio inline-block goods-img-item" style="margin-top:0px; margin-bottom:0px;"><label class=i-checks><input type=radio name=leader value=3 ng-model=goodsData.model required> <i></i>消费积分 + 现金</label></div></div></div><div class=form-group><label>商品市场价格（元）</label> <input type=text class=form-control placeholder=请输入商品市场价格（0元不显示） ng-model=goodsData.market_price required></div><div class=form-group><label>商品积分价格</label> <input type=text class=form-control placeholder=请输入商品积分价格 ng-model=goodsData.point_price required></div><div class=form-group ng-if="goodsData.model == 3"><label>商品现金价格（元）</label> <input type=text class=form-control placeholder=请输入商品现金价格 ng-model=goodsData.cash_price required></div><div class=form-group><label>商品重量（克）</label> <input type=text class=form-control placeholder=请输入商品重量（克） ng-model=goodsData.weight required></div><div class=form-group><label>限购数量（0为不限购）</label> <input type=text class=form-control placeholder=请输入限购数量（0为不限购） ng-model=goodsData.limit_buy required></div><div class=form-group><span><label>是否上架</label> <label class="i-switch bg-info m-t-xs m-r align-left relative" style=top:5px;><input type=checkbox ng-model=goodsData.is_release> <i></i></label></span> <span style=margin-left:10px;><label>是否限时抢购</label> <label class="i-switch bg-info m-t-xs m-r align-left relative" style=top:5px;><input type=checkbox ng-model=goodsData.is_time_buy> <i></i></label></span> <span style=margin-left:10px; ng-if="goodsData.model != 1"><label>是否分享</label> <label class="i-switch bg-info m-t-xs m-r align-left relative" style=top:5px;><input type=checkbox ng-model=goodsData.is_share> <i></i></label></span></div><div class=form-group ng-show=goodsData.is_time_buy><label>抢购时间</label><br><input type=text class=form-control placeholder=请输入抢购时间 datetimepicker ng-model=dateSelectBuy readonly></div><div class=form-group ng-show=goodsData.is_share><label>分享价格</label> <input type=text class=form-control placeholder=请输入分享价格 ng-model=goodsData.share_price></div><div class=form-group><label>配送方案</label><select name=account class="form-control m-b status-where" ng-model=goodsData.send_method><option value={{val.id}} ng-repeat="val in init_logistic.data">{{val.name}}</option></select></div><div class=form-group><label>配送方式</label> <label class="i-checks margin-right-role"><input type=checkbox ng-checked=goodsData.send_type.logistic ng-model=goodsData.send_type.logistic> <i></i><span class=role_name_check>普通快递</span></label> <label class="i-checks margin-right-role"><input type=checkbox ng-checked=goodsData.send_type.self ng-model=goodsData.send_type.self> <i></i><span class=role_name_check>上门自提</span></label></div><div class=form-group><div><label>归属商家（支持按手机号码搜索）</label></div><select ng-if=editing ui-jq=chosen class=full-width ng-model=goodsData.company_id><option ng-selected="val.id == goodsData.company_id" value={{val.id}} ng-repeat="val in init_company.data">{{val.mobile}}{{val.name == '无' ? val.name : '(' + val.name + ')'}}</option></select></div><div class=form-group><label>商家获得积分类型</label><select name=account class="form-control m-b status-where" ng-model=goodsData.company_get_type><option value=1>无</option><option value=2>可用积分</option><option value=3>消费积分</option></select></div><div class=form-group><div ng-if="goodsData.company_get_type == 2"><label>商家获得可用积分</label> <input type=text class=form-control placeholder=请输入商家获得可用积分 ng-model=goodsData.company_useable_point required></div><div ng-if="goodsData.company_get_type == 3"><label>商家获得消费积分</label> <input type=text class=form-control placeholder=请输入商家可用积分 ng-model=goodsData.company_useable_point required></div></div><div class=form-group ng-if=!goodsData.is_new><label>商品推广链接</label><div>{{goodsData.url}}</div></div><div class=form-group><button type=button class="btn btn-sm w-xs btn-primary" ng-disabled=form.$invalid ng-click=submit()>{{submitBtnHtml}}</button> <button type=button class="btn btn-sm w-xs btn-warning" ng-click=cancel()>返回</button></div></div><div class=clear></div></div></form></div></div></div>